{smcl}
{txt}{sf}{ul off}{.-}
      name:  {res}plog_88
       {txt}log:  {res}/Users/macbookair/Desktop/OCP_NEER/Codes/reer_month.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res} 9 Dec 2020, 09:49:52
{txt}
{com}. *--------------------------------Start of do file------------------------------- 
. 
. project, doinfo 
{txt}project master > Project Name: {res}master
{txt}project master > Project Dir.: {res}/Users/macbookair/Desktop/OCP_NEER
{txt}project master > Build start : {res}09dec2020, 09:49:50{txt}
project master > Do-file Name: {res}reer_month.do
{txt}project master > Enclosing do-files:
project master >     {res}master.do
{txt}
{com}. local pdir "`r(pdir)'"
{txt}
{com}. local dofile "`(dofile)'"
{txt}
{com}. 
. project, uses("`pdir'/data_derived/neer/month/neer_month_weights_agg1.dta")
{txt}project master > do-file uses: {res}"data_derived/neer/month/neer_month_weights_agg1.dta" filesig(2370503907:4451683){txt}

{com}. project, uses("`pdir'/data_derived/neer/month/neer_month_weights_agg2.dta")
{txt}project master > do-file uses: {res}"data_derived/neer/month/neer_month_weights_agg2.dta" filesig(2856109680:1961163){txt}

{com}. project, uses("`pdir'/data_derived/neer/month/neer_month_weights.dta")
{txt}project master > do-file uses: {res}"data_derived/neer/month/neer_month_weights.dta" filesig(2895962743:6514095){txt}

{com}. 
. cd "`pdir'/data_derived/neer/month"
{res}/Users/macbookair/Desktop/OCP_NEER/data_derived/neer/month
{txt}
{com}. 
. local myfiles : dir . files "neer*.dta"
{txt}
{com}. foreach file of local myfiles {c -(}
{txt}  2{com}. use `file', clear 
{txt}  3{com}. cd "`pdir'/data_derived/deflators"
{txt}  4{com}. merge 1:1 partner month product using cpi_month, gen(_merge_rate) force
{txt}  5{com}. keep if _merge_rate == 3
{txt}  6{com}. drop _merge_rate 
{txt}  7{com}. drop group pdct 
{txt}  8{com}. *** Compute the REER 
. egen group = group(month product)
{txt}  9{com}. bysort group : gen d_exchange = exchange*deflator
{txt} 10{com}. bysort group : gen pdct = d_exchange^double_weights
{txt} 11{com}. bysort group : gen reer = pdct[1]
{txt} 12{com}. bysort group : replace reer = reer[_n-1] * pdct if _n > 1
{txt} 13{com}. bysort group : replace reer = reer[_N]
{txt} 14{com}. 
. cd "`pdir'/data_derived/reer/month"
{txt} 15{com}. save reer_`file', replace
{txt} 16{com}. cd "`pdir'/data_derived/neer/month"
{txt} 17{com}. {c )-}
{res}/Users/macbookair/Desktop/OCP_NEER/data_derived/deflators
{txt}{p 0 7 2}
(note: variable
product was 
long, now double to accommodate using data's values)
{p_end}

{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}          99,320
{txt}{col 9}from master{col 30}{res}          33,293{txt}  (_merge_rate==1)
{col 9}from using{col 30}{res}          66,027{txt}  (_merge_rate==2)

{col 5}matched{col 30}{res}          52,298{txt}  (_merge_rate==3)
{col 5}{hline 41}
(99,320 observations deleted)
(50937 real changes made)
(51009 real changes made)
{res}/Users/macbookair/Desktop/OCP_NEER/data_derived/reer/month
{txt}file reer_neer_month_weights.dta saved
{res}/Users/macbookair/Desktop/OCP_NEER/data_derived/neer/month
/Users/macbookair/Desktop/OCP_NEER/data_derived/deflators
{txt}{p 0 7 2}
(note: variable
product was 
long, now double to accommodate using data's values)
{p_end}

{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}         106,551
{txt}{col 9}from master{col 30}{res}          23,340{txt}  (_merge_rate==1)
{col 9}from using{col 30}{res}          83,211{txt}  (_merge_rate==2)

{col 5}matched{col 30}{res}          35,114{txt}  (_merge_rate==3)
{col 5}{hline 41}
(106,551 observations deleted)
(34390 real changes made)
(34406 real changes made)
{res}/Users/macbookair/Desktop/OCP_NEER/data_derived/reer/month
{txt}file reer_neer_month_weights_agg1.dta saved
{res}/Users/macbookair/Desktop/OCP_NEER/data_derived/neer/month
/Users/macbookair/Desktop/OCP_NEER/data_derived/deflators
{txt}{p 0 7 2}
(note: variable
product was 
long, now double to accommodate using data's values)
{p_end}

{col 5}Result{col 38}# of obs.
{col 5}{hline 41}
{col 5}not matched{col 30}{res}         113,913
{txt}{col 9}from master{col 30}{res}          10,636{txt}  (_merge_rate==1)
{col 9}from using{col 30}{res}         103,277{txt}  (_merge_rate==2)

{col 5}matched{col 30}{res}          15,048{txt}  (_merge_rate==3)
{col 5}{hline 41}
(113,913 observations deleted)
(14859 real changes made)
(14871 real changes made)
{res}/Users/macbookair/Desktop/OCP_NEER/data_derived/reer/month
{txt}file reer_neer_month_weights_agg2.dta saved
{res}/Users/macbookair/Desktop/OCP_NEER/data_derived/neer/month
{txt}
{com}. 
. project, creates("`pdir'/data_derived/reer/month/reer_month_neer_month_weights_agg1.dta")
{txt}project master > do-file creates: {res}"data_derived/reer/month/reer_month_neer_month_weights_agg1.dta" filesig(2733698692:3805331){txt}

{com}. project, creates("`pdir'/data_derived/reer/month/reer_month_neer_month_weights_agg2.dta")
{txt}project master > do-file creates: {res}"data_derived/reer/month/reer_month_neer_month_weights_agg2.dta" filesig(4111143491:1638203){txt}

{com}. project, creates("`pdir'/data_derived/reer/month/reer_month_neer_month_weights.dta")
{txt}project master > do-file creates: {res}"data_derived/reer/month/reer_month_neer_month_weights.dta" filesig(1297504844:5661203){txt}

{com}. 
{txt}end of do-file
      name:  {res}plog_88
       {txt}log:  {res}/Users/macbookair/Desktop/OCP_NEER/Codes/reer_month.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res} 9 Dec 2020, 09:49:53
{txt}{.-}
{smcl}
{txt}{sf}{ul off}